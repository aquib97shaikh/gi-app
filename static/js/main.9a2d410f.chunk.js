(this["webpackJsonpgi-app"]=this["webpackJsonpgi-app"]||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),o=n.n(a),i=n(26),r=n.n(i),s=(n(34),n(8));n(35);var l=function(){return Object(c.jsx)("div",{className:"success",children:Object(c.jsx)("p",{children:"Success"})})},b=n(13),j=n(6),u=n(11),d=n(16),O=n(14),m=n(12),p=n(19),h=n(27);var f=function(e){var t=Object(a.useState)({1:"",2:"",3:"",4:"",5:"",6:""}),n=Object(s.a)(t,2),o=n[0],i=n[1],r=Object(a.useState)([]),l=Object(s.a)(r,2),b=l[0],d=l[1];Object(a.useEffect)((function(){d((function(e){return Array(6).fill().map((function(t,n){return e[n]||Object(a.createRef)()}))}))}),[]);var f=function(t){console.log(t);var n=o,c=Number(t.target.name);if(8===t.keyCode)n[c]="",i(Object(j.a)({},n)),c>1&&b[c-2].current&&b[c-2].current.focus();else{var a=t.key;if(Number.isNaN(Number(a)))return;console.log({o:a}),n[c]=a,c<6&&b[c].current&&b[c].current.focus()}e.onChangeOtp(o)};return Object(a.useEffect)((function(){b[0]&&b[0].current&&b[0].current.focus()}),[b]),Object(c.jsx)("div",{children:Object(c.jsx)(O.a,{className:"justify-content-center",children:Object(c.jsxs)(m.a,{xs:12,md:6,lg:5,children:[Object(c.jsx)("h2",{className:"mb-3",children:"Enter OTP"}),Object(c.jsxs)(u.a,{className:"form",onSubmit:e.onSubmitOtp,children:[Object(c.jsx)(u.a.Group,{id:"formgroup",children:Object(h.a)(b.keys()).map((function(e,t){return Object(c.jsx)(u.a.Control,{className:"otp",id:"otp".concat(t+1),type:"number",value:o[t+1],ref:b[e],name:t+1,placeholder:"  OTP".charAt(t),onKeyDown:f},t)}))}),Object(c.jsx)(p.a,{variant:"primary",button:"Submit",type:"submit",onClick:e.onSubmitOtp,children:" Continue "})]})]})})})},g=n(45),x=n(23);n(39);x.a.initializeApp({apiKey:"AIzaSyBVb9C3qsRGWRcz-AJ0veusZGjuK2JMu5A",authDomain:"gi-app-e2bb2.firebaseapp.com",projectId:"gi-app-e2bb2",storageBucket:"gi-app-e2bb2.appspot.com",messagingSenderId:"1093133212166",appId:"1:1093133212166:web:98bdcc5310e208d4530187"});var v=x.a;var y=function(e){var t=Object(a.useState)({mobile:"",otp:{}}),n=Object(s.a)(t,2),o=n[0],i=n[1],r=Object(a.useState)({mobileVerifed:!1,optConfirmed:!1,showOtp:!1}),l=Object(s.a)(r,2),h=l[0],x=l[1],y=function(){window.recaptchaVerifier=new v.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:function(e){console.log("Captcha Resolved"),S()},defaultCountry:"IN"})},S=function(e){e.preventDefault(),y();var t="+91"+o.mobile;console.log(t);var n=window.recaptchaVerifier;v.auth().signInWithPhoneNumber(t,n).then((function(e){window.confirmationResult=e,console.log("OTP is sent"),x(Object(j.a)(Object(j.a)({},h),{},{showOtp:!0}))})).catch((function(e){console.log(e),x(Object(j.a)(Object(j.a)({},h),{},{showOtp:!1}))}))};return Object(c.jsx)("div",{children:Object(c.jsxs)(d.a,{fluid:"sm",className:"mt-3",children:[Object(c.jsx)(O.a,{className:"justify-content-center",children:Object(c.jsxs)(m.a,{xs:12,md:6,lg:5,children:[Object(c.jsx)("h2",{className:"mb-3",children:"Login"}),Object(c.jsxs)(u.a,{className:"form",onSubmit:S,children:[Object(c.jsx)("div",{id:"recaptcha-container"}),Object(c.jsxs)(g.a,{children:[Object(c.jsx)(g.a.Prepend,{children:Object(c.jsx)(g.a.Text,{id:"inputGroup-sizing-sm",children:"+91"})}),Object(c.jsx)(u.a.Control,{type:"number",name:"mobile",value:o.mobile,disabled:h.showOtp,placeholder:"Mobile Number",onChange:function(e){var t;i(Object(j.a)(Object(j.a)({},o),{},Object(b.a)({},e.target.name,e.target.value))),t=e.target.value,console.log(t+"  dmob"),t.match(/^\d{10}$/)?x(Object(j.a)(Object(j.a)({},h),{},{mobileVerifed:!0})):x(Object(j.a)(Object(j.a)({},h),{},{mobileVerifed:!1}))},required:!0})]}),Object(c.jsxs)(p.a,{variant:"primary",button:"Submit",disabled:!h.mobileVerifed,type:"submit",children:[" ","Send Otp"," "]})]})]})}),h.showOtp&&Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(f,{onChangeOtp:function(e){i(Object(j.a)(Object(j.a)({},o),{},{otp:e}))},onSubmitOtp:function(t){t.preventDefault();var n=Object.values(o.otp).join(""),c=window.confirmationResult;console.log(n),c.confirm(n).then((function(t){var n=t.user;console.log("confirmed otp",{user:n}),fetch("https://rocky-beyond-21056.herokuapp.com/login",{method:"POST",body:JSON.stringify({mobile:o.mobile}),headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*"}}).then((function(e){return e.json()})).then((function(t){t.success&&e.loggedIn(!0)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e),alert("Incorrect OTP")}))}})})]})})};n(41);var S=function(e){var t=Object(a.useState)(0),n=Object(s.a)(t,2),o=n[0],i=n[1];return Object(c.jsx)("div",{className:"tab-container",children:e.options.map((function(t,n){return Object(c.jsx)("span",{className:o===n?"tab active":"tab",onClick:function(){i(n),e.tabHandler(n)},children:t},n)}))})};n(42);var N=function(e){var t=Object(a.useState)({mobile:"",otp:{},name:"",email:""}),n=Object(s.a)(t,2),o=n[0],i=n[1],r=Object(a.useState)({mobileVerifed:!1,optConfirmed:!1,showOtp:!1}),l=Object(s.a)(r,2),h=l[0],x=l[1],y=function(){window.recaptchaVerifier=new v.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:function(e){console.log("Captcha Resolved"),S()},defaultCountry:"IN"})},S=function(e){e.preventDefault(),y();var t="+91"+o.mobile;console.log(t);var n=window.recaptchaVerifier;v.auth().signInWithPhoneNumber(t,n).then((function(e){window.confirmationResult=e,console.log("OTP is sent"),x(Object(j.a)(Object(j.a)({},h),{},{showOtp:!0}))})).catch((function(e){console.log(e),x(Object(j.a)(Object(j.a)({},h),{},{showOtp:!1}))}))};return Object(c.jsx)("div",{children:Object(c.jsxs)(d.a,{fluid:"sm",className:"mt-3",children:[Object(c.jsx)(O.a,{className:"justify-content-center",children:Object(c.jsxs)(m.a,{xs:12,md:6,lg:5,children:[Object(c.jsx)("h2",{className:"mb-3",children:"SignUp"}),Object(c.jsxs)(u.a,{className:"form",onSubmit:S,children:[Object(c.jsx)("div",{id:"recaptcha-container"}),Object(c.jsxs)(g.a,{children:[Object(c.jsx)(g.a.Prepend,{children:Object(c.jsx)(g.a.Text,{id:"inputGroup-sizing-sm",children:"+91"})}),Object(c.jsx)(u.a.Control,{type:"number",name:"mobile",value:o.mobile,disabled:h.showOtp,placeholder:"Mobile Number",onChange:function(e){i(Object(j.a)(Object(j.a)({},o),{},Object(b.a)({},e.target.name,e.target.value))),e.target.value.match(/^\d{10}$/)?x(Object(j.a)(Object(j.a)({},h),{},{mobileVerifed:!0})):x(Object(j.a)(Object(j.a)({},h),{},{mobileVerifed:!1}))},required:!0})]}),Object(c.jsx)(p.a,{variant:"primary",button:"Submit",disabled:!h.mobileVerifed,type:"submit",children:"Send Otp"})]})]})}),h.showOtp&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(f,{onChangeOtp:function(e){i(Object(j.a)(Object(j.a)({},o),{},{otp:e}))},onSubmitOtp:function(e){e.preventDefault();var t=Object.values(o.otp).join(""),n=window.confirmationResult;console.log(t),n.confirm(t).then((function(e){e.user;x(Object(j.a)(Object(j.a)({},h),{},{otpConfirmed:!0}))})).catch((function(e){console.log(e),alert("Incorrect OTP"),x(Object(j.a)(Object(j.a)({},h),{},{otpConfirmed:!1}))}))}}),h.otpConfirmed&&Object(c.jsx)(O.a,{className:"justify-content-center",children:Object(c.jsx)(m.a,{xs:12,md:6,lg:5,children:Object(c.jsxs)(u.a,{className:"form2",onSubmit:function(t){t.preventDefault(),fetch("https://rocky-beyond-21056.herokuapp.com/signup",{method:"POST",body:JSON.stringify(o),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){t.success?e.loggedIn(!0):console.log(t)})).catch((function(e){console.log(e)}))},children:[Object(c.jsxs)(g.a,{children:[Object(c.jsx)(g.a.Prepend,{children:Object(c.jsx)(g.a.Text,{id:"inputGroup-sizing-sm",children:"Name"})}),Object(c.jsx)(u.a.Control,{type:"text",name:"name",autoComplete:"@name",value:o.name,placeholder:"Your Name",onChange:function(e){i(Object(j.a)(Object(j.a)({},o),{},Object(b.a)({},e.target.name,e.target.value)))},required:!0})]}),Object(c.jsxs)(g.a,{children:[Object(c.jsx)(g.a.Prepend,{children:Object(c.jsx)(g.a.Text,{id:"inputGroup-sizing-sm",children:"email@"})}),Object(c.jsx)(u.a.Control,{type:"email",name:"email",autoComplete:"@email",value:o.email,placeholder:"Mobile Number",onChange:function(e){i(Object(j.a)(Object(j.a)({},o),{},Object(b.a)({},e.target.name,e.target.value)))},required:!0})]}),Object(c.jsx)(p.a,{variant:"primary",button:"Submit",disabled:!h.mobileVerifed,type:"submit",children:"Signup"})]})})})]})]})})};var w=function(e){var t=Object(a.useState)(!0),n=Object(s.a)(t,2),o=n[0],i=n[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)(S,{options:["Login","Signup"],tabHandler:function(e){console.log({a:e}),i(0===e)}}),o?Object(c.jsx)(y,{loggedIn:e.loggedIn}):Object(c.jsx)(N,{loggedIn:e.loggedIn})]})};var C=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],o=t[1];return Object(c.jsx)("div",{className:"App",children:n?Object(c.jsx)(l,{}):Object(c.jsx)(w,{loggedIn:o})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),o(e),i(e)}))};n(43);r.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(C,{})}),document.getElementById("root")),I()}},[[44,1,2]]]);
//# sourceMappingURL=main.9a2d410f.chunk.js.map